{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"../style.css\";import{FiSearch}from\"react-icons/fi\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const endpoint='http://localhost:8000/nursing-homes';const SearchBar=()=>{const[query,setQuery]=useState(\"\");const[nursingHomes,setNursingHomes]=useState([]);const[suggestions,setSuggestions]=useState([]);const[searchResults,setSearchResults]=useState([]);const[showSuggestions,setShowSuggestions]=useState(false);const[hasSearched,setHasSearched]=useState(false);useEffect(()=>{fetch(endpoint).then(response=>response.json()).then(data=>setNursingHomes(data));},[]);const handleSearch=currentQuery=>{console.log(\"Searching for:\",currentQuery);setShowSuggestions(false);// Convert the current query and data to lowercase for case-insensitive comparison\nconst lowerCaseQuery=currentQuery.toLowerCase();const matches=nursingHomes.filter(home=>{// Combine all relevant fields into a single string for each home\nconst homeDataString=\"\".concat(home.name,\", \").concat(home.address_line_1,\", \").concat(home.suburb,\", \").concat(home.state,\", \").concat(home.post_code).toLowerCase();// Check if the combined string includes the query\nreturn homeDataString.includes(lowerCaseQuery);});console.log(\"Matches found:\",matches);setHasSearched(true);setSearchResults(matches);};const handleInputChange=e=>{const{value}=e.target;setQuery(value);setShowSuggestions(true);if(value.length>0){const regex=new RegExp(value,'gi');const matches=nursingHomes.filter(home=>home.address_line_1.match(regex)||home.suburb.match(regex)||home.state.match(regex));setSuggestions(matches);}else{setSuggestions([]);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"search-title\",children:[\"Find your own nearby \",/*#__PURE__*/_jsx(\"br\",{}),\"convenient Nursing Home\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search_bar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"search_input\",type:\"text\",placeholder:\"City or State\",value:query,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"button\",{className:\"search_button\",onClick:()=>handleSearch(query),children:/*#__PURE__*/_jsx(FiSearch,{size:24})})]}),showSuggestions&&/*#__PURE__*/_jsx(\"ul\",{className:\"suggestions\",children:suggestions.map((home,index)=>/*#__PURE__*/_jsxs(\"li\",{onClick:()=>{const selectedQuery=\"\".concat(home.name,\", \").concat(home.address_line_1,\", \").concat(home.suburb,\", \").concat(home.state,\", \").concat(home.post_code);setQuery(selectedQuery);setShowSuggestions(false);handleSearch(selectedQuery);},children:[home.name,\", \",home.address_line_1,\", \",home.suburb,\", \",home.state,\", \",home.post_code]},index))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"results\",children:/*#__PURE__*/_jsx(\"ul\",{children:hasSearched&&searchResults.length>0?searchResults.map((home,index)=>/*#__PURE__*/_jsx(\"li\",{className:\"card-result\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-title\",children:home.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-info\",children:[\" \",home.address_line_1,\", \",home.suburb,\", \",home.state,\", \",home.post_code]})]})},index)):null})})]});};export default SearchBar;","map":{"version":3,"names":["React","useState","useEffect","FiSearch","jsx","_jsx","jsxs","_jsxs","endpoint","SearchBar","query","setQuery","nursingHomes","setNursingHomes","suggestions","setSuggestions","searchResults","setSearchResults","showSuggestions","setShowSuggestions","hasSearched","setHasSearched","fetch","then","response","json","data","handleSearch","currentQuery","console","log","lowerCaseQuery","toLowerCase","matches","filter","home","homeDataString","concat","name","address_line_1","suburb","state","post_code","includes","handleInputChange","e","value","target","length","regex","RegExp","match","className","children","type","placeholder","onChange","onClick","size","map","index","selectedQuery"],"sources":["/Users/thumay/Documents/myprojects/seek-nursing-home/seeking-nursing-home/frontend/src/components/SearchBar.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport \"../style.css\";\nimport { FiSearch } from \"react-icons/fi\";\n\nconst endpoint = 'http://localhost:8000/nursing-homes';\nconst SearchBar = () => {\n    const [query, setQuery] = useState(\"\");\n    const [nursingHomes, setNursingHomes] = useState([]);\n    const [suggestions, setSuggestions] = useState([]);\n    const [searchResults, setSearchResults] = useState([]);\n    const [showSuggestions, setShowSuggestions] = useState(false);\n    const [hasSearched, setHasSearched] = useState(false);\n\n    useEffect(() => {\n        fetch(endpoint)\n            .then(response => response.json())\n            .then(data => setNursingHomes(data));\n    }, []);\n\n    const handleSearch = (currentQuery) => {\n        console.log(\"Searching for:\", currentQuery);\n        setShowSuggestions(false);\n    \n        // Convert the current query and data to lowercase for case-insensitive comparison\n        const lowerCaseQuery = currentQuery.toLowerCase();\n    \n        const matches = nursingHomes.filter(home => {\n            // Combine all relevant fields into a single string for each home\n            const homeDataString = `${home.name}, ${home.address_line_1}, ${home.suburb}, ${home.state}, ${home.post_code}`.toLowerCase();\n            // Check if the combined string includes the query\n            return homeDataString.includes(lowerCaseQuery);\n        });\n    \n        console.log(\"Matches found:\", matches);\n        setHasSearched(true);\n        setSearchResults(matches);\n        \n    };\n\n    const handleInputChange =(e) => {\n        const { value } = e.target;\n        setQuery(value);\n        setShowSuggestions(true);\n        if(value.length > 0) {\n            const regex = new RegExp(value, 'gi');\n            const matches = nursingHomes.filter(home => home.address_line_1.match(regex) || home.suburb.match(regex) || home.state.match(regex));\n            setSuggestions(matches)\n        } else {\n            setSuggestions([]);\n        }\n    }\n\n\n    return (\n        <div className=\"search-container\">\n            <h1 className=\"search-title\">Find your own nearby <br/>convenient Nursing Home</h1>\n            \n            <div className=\"search_bar\">\n                <div className=\"row\">\n                    <input \n                        className=\"search_input\" \n                        type=\"text\" \n                        placeholder=\"City or State\"\n                        value={query}\n                        onChange={handleInputChange}\n                    />\n                    <button className=\"search_button\" onClick={() => handleSearch(query)}><FiSearch size={24}/></button>\n                </div>\n                {showSuggestions && (\n                    <ul className=\"suggestions\">\n                    {suggestions.map((home, index) => (\n                        <li key={index} onClick={() => {\n                            const selectedQuery = `${home.name}, ${home.address_line_1}, ${home.suburb}, ${home.state}, ${home.post_code}`;\n                            setQuery(selectedQuery);\n                            setShowSuggestions(false)\n                            handleSearch(selectedQuery)\n                        }}>\n                            {home.name}, {home.address_line_1}, {home.suburb}, {home.state}, {home.post_code}\n                        </li>\n                    ))}\n                    </ul>\n                )}\n            </div>\n            <div className=\"results\">           \n                <ul>\n                {hasSearched && searchResults.length > 0 ? (\n                        searchResults.map((home, index) => (\n                            <li key={index} className=\"card-result\">\n                                <div className=\"card-content\">\n                                    <div className=\"card-title\">{home.name}</div>\n                                    <div className=\"card-info\"> {home.address_line_1}, {home.suburb}, {home.state}, {home.post_code}</div>\n                                </div>\n                            </li>\n                        ))\n                ) : null}\n                </ul>\n            </div>\n        </div>\n    );\n}\n\nexport default SearchBar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}